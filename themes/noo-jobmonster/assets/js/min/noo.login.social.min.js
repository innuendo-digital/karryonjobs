function random_pass(){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;15>o;o++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}jQuery(document).ready(function(e){function i(i){auth2.attachClickHandler(i,{},function(o){var a=o.getAuthResponse(),s={action:"check_login",using:"gg",id:o.getBasicProfile().getEmail(),id_token:a.id_token};$this=e(i),e.post(nooSocial.ajax_url,s,function(i){if("success"===i.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else if("not_user"===i.status)if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#cc3d2d","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgGoogleModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+o.getBasicProfile().getName()).css({margin:"0px 0px 20px 0px"}),e(".memberModalLogin").modal("hide"),a.modal("show").removeClass("form-actions"),a.find('input[name="user_login"]').val(o.getBasicProfile().getEmail()),a.find('input[name="user_email"]').val(o.getBasicProfile().getEmail());var s=random_pass();a.find('input[name="user_password"]').val(s),a.find('input[name="cuser_password"]').val(s),a.find("form").append('<input type="hidden" class="using" name="using" value="gg" /><input type="hidden" class="userid" name="userid" value="'+o.getBasicProfile().getId()+'" /><input type="hidden" class="name" name="name" value="'+o.getBasicProfile().getName()+'" /><input type="hidden" class="using_id" name="using_id" value="'+o.getBasicProfile().getEmail()+'" />')}else{var n={};"employer"==nooSocial.allow?n={action:"create_user",security:nooSocial.security,using:"google",id:o.getBasicProfile().getEmail(),userid:o.getBasicProfile().getId(),name:o.getBasicProfile().getName(),capabilities:"employer"}:"candidate"==nooSocial.allow&&(n={action:"create_user",security:nooSocial.security,using:"google",id:o.getBasicProfile().getEmail(),userid:o.getBasicProfile().getId(),name:o.getBasicProfile().getName(),capabilities:"candidate"}),e.post(nooSocial.ajax_url,n,function(e){"success"==e.status&&window.location.reload()})}else{if("error"===i.status)return e(".noo-ajax-result").show().html(i.message),!1;e(".noo-ajax-result").show().html(nooSocial.msgServerError)}})},function(i){return e(".noo-ajax-result").show().html(i),!1})}e(".button_socical").on("click",".fa-facebook-square",function(i){i.preventDefault();e(this);return"undefined"!=typeof FB?(FB.login(function(i){if(!i.authResponse)return e(".noo-ajax-result").show().html(nooSocial.msgFBUserCanceledLogin),!1;var o=i.authResponse.grantedScopes.split(",");-1!==o.indexOf("email")?FB.api("/me?fields=name,email",function(i){if(!i||i.error)e(".noo-ajax-result").show().html(nooSocial.msgMissingAppID);else if(i.email){var o={action:"check_login",using:"fb",id:i.email};e.post(nooSocial.ajax_url,o,function(o){if("success"===o.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else{if("not_user"!==o.status)return"error"===o.status?(e(".noo-ajax-result").show().html(o.message),!1):(e(".noo-ajax-result").show().html(nooSocial.msgServerError),!1);if("both"==nooSocial.allow){var a=e(".memberModalRegisterSocial");a.find(".register_social").hide(),a.find(".modal-header").css({background:"#2952aa","border-radius":"3px 2px 0 0"}),a.find(".close").css("color","#fff"),a.find(".modal-title").html(nooSocial.msgFacebookModalTitle).css("color","#fff"),a.find(".register-heading").show().html(nooSocial.msgHi+i.name).css({margin:"0px 0px 20px 0px"}),a.find('input[name="user_login"]').val(i.email),a.find('input[name="user_email"]').val(i.email);var s=random_pass();a.find('input[name="user_password"]').val(s),a.find('input[name="cuser_password"]').val(s),a.find("form").append('<input type="hidden" class="using" name="using" value="fb" /><input type="hidden" class="userid" name="userid" value="'+i.id+'" /><input type="hidden" class="name" name="name" value="'+i.name+'" /><input type="hidden" class="using_id" name="using_id" value="'+i.email+'" />'),e(".memberModalLogin").modal("hide"),a.modal("show")}else{var n={};"employer"==nooSocial.allow?n={action:"create_user",security:nooSocial.security,using:"facebook",id:i.email,userid:i.id,name:i.name,capabilities:"employer"}:"candidate"==nooSocial.allow&&(n={action:"create_user",security:nooSocial.security,using:"facebook",id:i.email,userid:i.id,name:i.name,capabilities:"candidate",birthday:i.birthday,address:i.address}),e.post(nooSocial.ajax_url,n,function(e){"success"==e.status&&window.location.reload()})}}})}else e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail)}):(e(".noo-ajax-result").show().html(nooSocial.msgFBMissingEmail),FB.api("/me/permissions","DELETE"))},{scope:"email",return_scopes:!0}),!1):void 0});var o=function(){gapi.load("auth2",function(){var o=nooSocial.google_client_id;o=o.split(".")[0];var a=nooSocial.google_client_secret;auth2=gapi.auth2.init({client_id:o+".apps.googleusercontent.com",cookiepolicy:a}),e(".button_socical .fa-google-plus").each(function(){i(this.id)})})};""!==nooSocial.google_client_id&&"undefined"!=typeof gapi&&o(),e(".button_socical").on("click",".fa-linkedin-square",function(i){i.preventDefault();e(this);"undefined"!=typeof IN&&IN.User.isAuthorized()?IN.API.Profile("me").fields("id","email-address","firstName","lastName").result(function(e){reques_api(e)}):(IN.UI.Authorize().place(),onLinkedInAuth=function(){IN.API.Profile("me").fields("id","email-address","firstName","lastName").result(function(e){reques_api(e)})},IN.Event.on(IN,"auth",onLinkedInAuth)),reques_api=function(i){var o=i.values[0].firstName+" "+i.values[0].lastName,a={action:"check_login",using:"linkedin",id:i.values[0].emailAddress};e.post(nooSocial.ajax_url,a,function(a){if("success"===a.status)e(".noo-ajax-result").show().html(nooSocial.msgLoginSuccessful),window.location.reload();else if("not_user"===a.status)if("both"==nooSocial.allow){var s=e(".memberModalRegisterSocial");s.find(".register_social").hide(),s.find(".modal-header").css({background:"#0077b4","border-radius":"3px 2px 0 0"}),s.find(".close").css("color","#fff"),s.find(".modal-title").html(nooSocial.msgLinkedInModalTitle).css("color","#fff"),s.find(".register-heading").show().html(nooSocial.msgHi+o).css({margin:"0px 0px 20px 0px"}),e(".memberModalLogin").modal("hide"),s.modal("show").removeClass("form-actions"),s.find('input[name="user_login"]').val(i.values[0].emailAddress),s.find('input[name="user_email"]').val(i.values[0].emailAddress);var n=random_pass();s.find('input[name="user_password"]').val(n),s.find('input[name="cuser_password"]').val(n),s.find("form").append('<input type="hidden" class="using" name="using" value="gg" /><input type="hidden" class="name" name="name" value="'+o+'" /><input type="hidden" class="using_id" name="using_id" value="'+i.values[0].emailAddress+'" />')}else{var l={};"employer"==nooSocial.allow?l={action:"create_user",security:nooSocial.security,using:"linkedin",id:i.values[0].emailAddress,name:o,capabilities:"employer"}:"candidate"==nooSocial.allow&&(l={action:"create_user",security:nooSocial.security,using:"linkedin",id:i.values[0].emailAddress,name:o,capabilities:"candidate"}),e.post(nooSocial.ajax_url,l,function(e){"success"==e.status&&window.location.reload()})}else{if("error"===a.status)return e(".noo-ajax-result").show().html(a.message),!1;e(".noo-ajax-result").show().html(nooSocial.msgServerError)}})}})}),window.fbAsyncInit=function(){FB.init({appId:nooSocial.facebook_api,cookie:!0,xfbml:!0,version:"v2.5"})},""!==nooSocial.facebook_api&&!function(e,i,o){var a,s=e.getElementsByTagName(i)[0];e.getElementById(o)||(a=e.createElement(i),a.id=o,a.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(a,s))}(document,"script","facebook-jssdk");